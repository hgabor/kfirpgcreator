include("class")
include("luabit/bit.lua")

-- Mimics the UserInput.Buttons enum
btnNone = 0
btnDown = 1
btnUp = 2
btnLeft = 4
btnRight = 8
btnAction = 16
btnBack = 32

ButtonState = class(function(self, state)
  self.state = state
end)

function ButtonState:IsPressed(btn, state)
  return (bit.band(btn, self.state) == btn)
end


Screen = class(function(self)
  self.handle = CustomScreen_New()
end)

function Screen:Place(x, y, gfx)
  CustomScreen_Place(self.handle, x, y, gfx.handle)
end

function Screen:Show()
  CustomScreen_Show(self.handle)
end

function Screen:Hide()
  CustomScreen_Hide(self.handle)
end

function Screen:OnKeyPress(func)
  CustomScreen_OnKey_Add(self.handle, function(state) func(ButtonState(state)) end)
end


TextGraphics = class(function(self, msg, align)
  self.handle = TextGraphics_New(msg, align or "center")
  self.width = Graphics_GetWidth(self.handle)
  self.height = Graphics_GetHeight(self.handle)
end)

WindowGraphics = class(function(self, width, height)
  self.handle = WindowGraphics_New(width, height)
  self.width = width
  self.height = height
end)

MenuItemBackground = class(function(self, width, height)
  self.handle = MenuItemBackground_New(width, height)
  self.width = width
  self.height = height
end)
